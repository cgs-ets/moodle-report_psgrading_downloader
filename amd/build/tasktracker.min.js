define(["core/ajax","core/url"],function(r,a){let n;function i(){var e=(new Date-n)/1e3;console.log(`Process took ${e} seconds.`)}return{init:function(e,o){n=new Date,function o(n,t){console.log("checking...");r.call([{methodname:"report_psgrading_downloader_check_task_status",args:{taskid:n},done:function(e){if("complete"===e.status){let e=a.relativeUrl("/report/psgrading_downloader/download_reports.php",{taskid:n,courseid:t},!0);window.location.href=e,document.getElementById("psgrading-downloader-warning-alert").remove(),i()}else setTimeout(o(n,t),5e3)},fail:function(e){console.log(e)}}])}(e,o)}}});